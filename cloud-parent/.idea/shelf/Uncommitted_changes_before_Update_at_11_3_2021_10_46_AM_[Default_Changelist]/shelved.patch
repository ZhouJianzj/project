Index: ../sys-manager/src/main/java/com/zj/service/SysServiceImpl.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.zj.service;\r\n\r\nimport com.github.pagehelper.PageHelper;\r\nimport com.zj.dao.SysDao;\r\nimport com.zj.entity.*;\r\nimport com.zj.util.Md5;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.stereotype.Repository;\r\nimport org.springframework.stereotype.Service;\r\n\r\nimport javax.servlet.http.HttpServletRequest;\r\nimport javax.servlet.http.HttpSession;\r\nimport java.io.UnsupportedEncodingException;\r\nimport java.security.NoSuchAlgorithmException;\r\nimport java.util.List;\r\n\r\n\r\n/**\r\n * @author zhoujian\r\n */\r\n@Service\r\npublic class SysServiceImpl implements SysService {\r\n    @Autowired\r\n    private SysDao sysDao;\r\n\r\n    /**\r\n     * 用户登录\r\n     */\r\n    @Override\r\n    public UserManager userLoginService(User user, HttpServletRequest request) {\r\n        String password = user.getPassword();\r\n        //md5加密\r\n        try {\r\n            String ps = Md5.EncoderByMd5(password);\r\n            System.out.println(ps);\r\n            user.setPassword(ps);\r\n        } catch (NoSuchAlgorithmException | UnsupportedEncodingException e) {\r\n            e.printStackTrace();\r\n        }\r\n        //查询\r\n        UserManager userManager = sysDao.userSelect(user);\r\n        //正确的用户放入redissession\r\n        if (null != userManager){\r\n            HttpSession session = request.getSession();\r\n            session.setAttribute(\"user\",userManager);\r\n\r\n        }\r\n        return userManager;\r\n    }\r\n\r\n    /**\r\n     * 机构查询\r\n     * @param pageNo\r\n     * @param pageSize\r\n     * @param orgName\r\n     * @return\r\n     */\r\n    @Override\r\n    public List<Organize> findOrganzieService(String pageNo, String pageSize, String orgName) {\r\n        Integer num = Integer.valueOf(pageNo);\r\n        Integer size = Integer.valueOf(pageSize);\r\n        PageHelper.startPage((num-1)*size,size);\r\n        return sysDao.organizeSelect(orgName);\r\n    }\r\n\r\n    /**\r\n     * 添加机构\r\n     * @return\r\n     */\r\n    @Override\r\n    public CommonResponse<Object> addOrganizeService(Organize organize) {\r\n        CommonResponse<Object> response = new CommonResponse<>();\r\n        if (sysDao.organizeInsert(organize)){\r\n            response.setMsg(\"添加成功！\");\r\n            return response;\r\n        }else {\r\n            response.setMsg(\"添加失败！\");\r\n            return  response;\r\n        }\r\n\r\n    }\r\n\r\n    /**\r\n     * 角色查询\r\n     * @param pageNo 页码\r\n     * @param pageSize 每一=页数据量\r\n     * @param roleName 角色字段\r\n     * @return 结果集\r\n     */\r\n    @Override\r\n    public List<Role> findRoleService(String pageNo,String pageSize,String roleName) {\r\n        return sysDao.roleSelect(roleName);\r\n    }\r\n\r\n    /**\r\n     * 角色添加\r\n     * @param role 参数\r\n     * @return 返回结果\r\n     */\r\n    @Override\r\n    public CommonResponse<Object> addRoleService(Role role) {\r\n        CommonResponse<Object> response = new CommonResponse<>();\r\n        if (sysDao.roleInsert(role)){\r\n            response.setStatus(200);\r\n            response.setMsg(\"添加成功！\");\r\n            return response;\r\n        }else {\r\n            response.setStatus(400);\r\n            response.setMsg(\"添加失败！\");\r\n            return  response;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 查询所有权限\r\n     * @return 权限结果集\r\n     */\r\n    @Override\r\n    public List<Perm> findPermService() {\r\n        return sysDao.permSelect();\r\n    }\r\n\r\n    /**\r\n     * 给角色添加权限\r\n     * @param roleId\r\n     * @param permId\r\n     * @return\r\n     */\r\n    @Override\r\n    public CommonResponse<Object> addRolePermService(String roleId, String permId) {\r\n        CommonResponse<Object> response = new CommonResponse<>();\r\n        if (sysDao.rolePermInsert(roleId,permId)){\r\n            response.setStatus(200);\r\n            response.setMsg(\"添加成功！\");\r\n            return response;\r\n        }else {\r\n            response.setStatus(400);\r\n            response.setMsg(\"添加失败！\");\r\n            return response;\r\n        }\r\n    }\r\n\r\n\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- ../sys-manager/src/main/java/com/zj/service/SysServiceImpl.java	(revision d0316d161f872899ac66e684078ba2c4d34e71bb)
+++ ../sys-manager/src/main/java/com/zj/service/SysServiceImpl.java	(date 1635907577022)
@@ -5,7 +5,6 @@
 import com.zj.entity.*;
 import com.zj.util.Md5;
 import org.springframework.beans.factory.annotation.Autowired;
-import org.springframework.stereotype.Repository;
 import org.springframework.stereotype.Service;
 
 import javax.servlet.http.HttpServletRequest;
